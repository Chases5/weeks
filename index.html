<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="twitter:title" property="og:title" content="Weeks of your life">
    <meta property="og:url" content="https://christopherstenson.github.io/weeks/">
    <meta property="og:type" content="website" />
    <meta name="twitter:card" property="og:image" content="https://christopherstenson.github.io/weeks/og-image.png?v=02" />
    <meta property="fb:app_id" content="1038536892921143" />
    <meta name="description" property="og:description" content="How much time do you have left, on average? Visualize each week.">
    <meta name="twitter:creator" content="@SerebroRaya">
    <meta name="twitter:site" content="@SerebroRaya">
    <title>Weeks of your life</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!--
      Hi fellow developer / person who erroneously pressed Ctrl + U!

      I know you could do this better than I did it. I was shooting for speed of
      development, and so I went with the tools I've been using lately and tried
      to make it simple. It could be done smaller, faster, smoother, and with no
      external dependencies, I know.

      The beautiful thing about web development is that there are a million ways
      to do something. This isn't the best, so I'd love to see your take.

      twitter.com/serebroraya
    -->
    <style>
      h1 {
        font-size: 200%;
      }

      .pane {
        border: 1px solid #eee;
        border-radius: 5px;
        background-color: #fefefe;
        margin: 20px;
      }

      .input {
        padding: 20px;
      }

      .result {
        padding: 10px;
        display: none;
      }

      .year {
        margin: 5px 0;
        height: 15px;
        width: 100%;
      }

      #dot-result {
        word-wrap: break-word;
        font-size: 28px;
        line-height: 15px;
        letter-spacing: 5px;
      }

      .form-control {
        margin-bottom: 20px;
      }

      footer {
        padding: 20px;
        border-top: 1px solid #fefefe;
        font-size: 75%;
      }

      .fb_iframe_widget {
        margin-right: 10px;
        top: -5px;
      }
    </style>
    <script>
      function eval() {
        var birthday, age, deathday, today;
        var dotOutput = '', textOutput = '';

        birthday = new Date($('#bday').val());
        age = Math.round($('#age').val());
        deathday = new Date(birthday);
        today = new Date();

        deathday.setFullYear(deathday.getFullYear() + age);

        if (Object.prototype.toString.call(birthday) !== "[object Date]" || isNaN(birthday.getTime()))
        {
          textOutput = error('That doesn\'t look like a birthday!');
          dotOutput = '';
        }
        else if (birthday > deathday || 0 > age)
        {
          textOutput = error('You can\'t live for negative years!');
          dotOutput = '';
        }
        else if (today > deathday)
        {
          textOutput = textResult(0);
          dotOutput = '';
        }
        else
        {
          if (birthday > today)
          {
            today = birthday;
          }
          
          var differenceInMil, differenceInWks, differenceInWksInt;

          differenceInMil = deathday - today;
          differenceInWks = ((((differenceInMil / 1000) / 60) / 60) / 24) / 7;
          differenceInWksInt = Math.round(differenceInWks);
          differenceInWksInt < 0 ? 0 : differenceInWksInt;

          textOutput = textResult(differenceInWksInt);
          for (var i = 0; i <= differenceInWksInt; i++)
          {
            dotOutput += '&bull;';
          }
        }

        $('#dot-result').html(dotOutput);
        $('#text-result').html(textOutput);
        $('#result').slideDown();
      }

      function textResult(number)
      {
        return '<h2>' +
                 number +
               ' <small class="text-muted">weeks left</small>' +
               '</h2>';
      }

      function error(text)
      {
        return '<h2 class="text-danger">' +
                 getErrorHeader() +
               '</h2>' +
               '<small class="text-muted text-danger">' +
                 text +
               '</small>';

      }

      function getErrorHeader()
      {
        var errors = [
          "Uh-oh!",
          ":(",
          "Oops.",
          "Yikes!",
          "...",
          "Houston, we have a problem.",
          "Danger, Will Robinson!",
          "Error!",
          "PEBCAK?",
          "That's an error."
        ];

        return errors[Math.floor(Math.random() * errors.length)];
      }
    </script>
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7&appId=1038536892921143";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-3 col-md-4 col-xs-12">
          <div class="input pane">
            <h1>How many weeks do you have left?</h1>
            <p>
                On average in the US, a person can expect to live 79 years. Women typically live for
                82 years. Men typically live for 77.
            </p>
            <p>
              Input your birthday and this site will show you how many weeks you have
              left to live, on average. You may wish to adjust the age you are at death
              to experiment with
              <a href="https://en.wikipedia.org/wiki/List_of_countries_by_life_expectancy">different values.</a>
            </p>
            <label for="bday">Birthday</label>
            <input class="form-control" type="date" id="bday" oninput="eval()"/>
            <label for="age">Age at death</label>
            <input class="form-control" type="number" id="age" value="79" min="0" oninput="eval()"/>

            <div class="fb-share-button" data-href="https://christopherstenson.github.io/weeks/" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fchristopherstenson.github.io%2Fweeks%2F&amp;src=sdkpreparse">Share</a></div>
            <a href="https://twitter.com/share" class="twitter-share-button" data-text="How many weeks do you have left?" data-url="https://christopherstenson.github.io/weeks/" data-hashtags="WeeksOfYourLife" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            <br><script type="text/javascript" src="//www.reddit.com/buttonlite.js?i=0"></script>
          </div>
        </div>

        <div class="col-lg-8 col-md-8 col-xs-12">
          <div id="result" class="result pane">
            <div id="text-result"></div>
            <hr>
            <div id="dot-result"></div>
          </div>
        </div>
      </div>

      <footer>
        <p>
          Life Expectancy Figures rounded from WHO data, available
          <a href="http://www.who.int/gho/publications/world_health_statistics/2016/Annex_B/en/">here.</a>
        </p>
        <p>
          Made with <a href="http://jquery.com/">jQuery</a> and <a href="http://getbootstrap.com/">Bootstrap</a>.
        </p>
        <p>
          Created by <a href="https://twitter.com/SerebroRaya">Chris Stenson</a>.
        </p>
      </footer>
    </div>
  </body>
</html>
